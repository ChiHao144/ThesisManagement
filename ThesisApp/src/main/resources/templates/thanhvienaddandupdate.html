<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Quản lý thành viên</title>

    <th:context th:replace="base :: resources"></th:context>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet"/>

    <style>
        .select2-container--bootstrap-5 .select2-search--dropdown {
            padding: 0;
            border-bottom: none;
        }

        .select2-container--bootstrap-5 .select2-search--dropdown .select2-search__field {
            border: none;
            border-radius: 0;
            padding: 0.5rem 0.75rem;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
        }

        .select2-container--bootstrap-5 .select2-dropdown {
            border: 1px solid #80bdff;
            box-shadow: none;
            border-radius: 0.375rem;
            overflow: hidden;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <div th:replace="base :: header"></div>

    <main class="container mt-4">
        <h1 class="text-center text-info mb-4">QUẢN LÝ THÀNH VIÊN</h1>
        <form th:action="@{/thanhviens/save}" method="post" th:object="${thanhvien}" class="bg-white p-4 shadow rounded">
            <div th:if="${errorMessage}" class="alert alert-danger">
                <p th:text="${errorMessage}"></p>
            </div>

            <div class="mb-3">
                <label class="form-label">Giảng viên</label>
                <select class="form-select js-giangvien-select" th:field="*{gvId}">
                    <option value="">-- Chọn giảng viên --</option>
                    <option th:each="gv : ${giangViens}"
                            th:value="${gv.id}"
                            th:text="${gv.id + ' - ' + gv.user.fullname}"></option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Hội đồng</label>
                <select class="form-select js-hoidong-select" th:field="*{hoiDongId}">
                    <option value="">-- Chọn hội đồng --</option>
                    <option th:each="hd : ${hoiDongs}"
                            th:value="${hd.id}"
                            th:text="${hd.id + ' - ' + hd.noiDungBaoVe}"></option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Vai trò</label>
                <select class="form-select" th:field="*{vaiTro}">
                    <option value="">-- Chọn vai trò --</option>
                    <option value="chu_tich">Chủ tịch</option>
                    <option value="thu_ky">Thư ký</option>
                    <option value="phan_bien">Phản biện</option>
                    <option value="uy_vien">Ủy viên</option>
                    <option value="thanh_vien">Thành viên</option>
                </select>
            </div>


            <div class="d-flex gap-2 justify-content-center">
                <input type="hidden" th:field="*{id}"/>
                <button type="submit" class="btn btn-success">
                    <span th:if="${thanhvien.id == null}">Thêm thành viên</span>
                    <span th:if="${thanhvien.id != null}">Cập nhật thành viên</span>
                </button>
                <a th:href="@{/thanhviens}" class="btn btn-secondary">Hủy</a>
            </div>
        </form>
    </main>

    <div th:replace="base :: footer"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        $(document).ready(function () {
            $('.js-giangvien-select').select2({
                placeholder: 'Nhập mã hoặc tên giảng viên...',
                allowClear: true,
                width: '100%',
                theme: 'bootstrap-5'
            });

            $('.js-hoidong-select').select2({
                placeholder: 'Nhập mã hoặc nội dung bảo vệ...',
                allowClear: true,
                width: '100%',
                theme: 'bootstrap-5'
            });
        });
    </script>
</body>
</html>
